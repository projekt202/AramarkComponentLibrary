<section [class]="getClasses()">
  <div class="o-container">
    <div class="o-grid o-grid--center">
      <div class="o-grid__col">
        <div class="accordion__content">
          <aside class="accordion__intro" *ngIf="intro">
            <div
              aria-hidden="true"
              [lazyLoad]="intro.imageUrl"
              class="accordion__intro-img"
            >
              &nbsp;
            </div>
            <aus-typography
              [text]="intro.title"
              variant="h3"
              tag="h1"
            ></aus-typography>
            <aus-typography [text]="intro.text" variant="p-md"></aus-typography>
          </aside>
          <main class="accordion__main">
            <collapsible-list [type]="'accordion'">
              <collapsible-list-item *ngFor="let item of data; let i = index">
                <collapsible-header (click)="onToggleHandler(i)">
                  <button
                    class="accordion__item-header"
                    [attr.aria-expanded]="i === openIdx"
                    [attr.aria-controls]="'accordion-item-' + item.title"
                    [id]="'accordion-item-header-' + item.title"
                  >
                    <div class="accordion__item-title">
                      <aus-typography
                        [text]="item.title"
                        variant="h5"
                        tag="h2"
                      ></aus-typography>
                    </div>
                    <div aria-hidden="true" class="accordion__item-btn-wrapper">
                      <div
                        class="accordion__item-btn"
                        [ngClass]="{
                          'accordion__item-btn--open': i === openIdx
                        }"
                      ></div>
                    </div>
                  </button>
                </collapsible-header>
                <collapsible-body
                  class="accordion__item-body"
                  [id]="'accordion-item-' + item.title"
                  [ngClass]="{
                    'accordion__item-body--active': i === openIdx
                  }"
                  [attr.aria-hidden]="i !== openIdx"
                  [attr.aria-labelledby]="'accordion-item-header-' + item.title"
                  role="region"
                >
                  <aus-wysiwyg
                    [fullwidth]="true"
                    [data]="item.content"
                    class="accordion__item-content"
                    bgColor="transparent"
                    [embedded]="true"
                    [ariaHidden]="i === openIdx ? 'false' : 'true'"
                  ></aus-wysiwyg>
                </collapsible-body>
              </collapsible-list-item>
            </collapsible-list>
          </main>
        </div>
      </div>
    </div>
  </div>
</section>
