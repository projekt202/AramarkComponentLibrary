<fieldset
  class="dropdown"
  [ngClass]="{
    'dropdown--disabled': isDisabled
  }"
>
  <label [for]="name" *ngIf="label">
    <span class="dropdown__label">
      <aus-typography
        [presetClassNames]="['text-preset-7--medium']"
        [text]="label"
      ></aus-typography>
      <div class="dropdown__label-required-mark">
        <aus-typography
          [presetClassNames]="['text-preset-7--medium']"
          text="*"
          *ngIf="isRequired"
        ></aus-typography>
      </div>
    </span>
  </label>
  <ng-container *ngIf="label" [ngTemplateOutlet]="dropdown"></ng-container>
  <label *ngIf="!label" [for]="name">
    <ng-container [ngTemplateOutlet]="dropdown"></ng-container>
  </label>
</fieldset>

<ng-template #dropdown>
  <div class="dropdown__main">
    <div class="dropdown__arrow">
      <svg
        width="16"
        height="16"
        viewBox="0 0 16 16"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
      >
        <path
          d="M8 10.6667L4 6.66669L4.94 5.72669L8 8.78002L11.06 5.72669L12 6.66669L8 10.6667Z"
          fill="#464646"
        />
      </svg>
    </div>
    <div
      class="dropdown__control"
      [ngClass]="{
        'no-value': !selected
      }"
    >
      <ng-select
        [labelForId]="name"
        [clearable]="true"
        [(ngModel)]="
          !didInteract && hasInitialIdx() ? items[getInitialIdx()] : selected
        "
        [disabled]="!!isDisabled"
        [placeholder]="placeholder"
        (change)="onChange($event)"
        (ngModelChange)="selectedChange.emit(selected)"
      >
        <ng-option *ngFor="let item of items" [value]="item">
          <aus-typography
            [text]="item"
            [presetClassNames]="['text-preset-7']"
          ></aus-typography>
        </ng-option>
      </ng-select>
    </div>
  </div>
</ng-template>
